<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINNER'S</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nosifer&family=Eater&family=Cinzel:wght@400;700&family=MedievalSharp&family=UnifrakturMaguntia&family=IM+Fell+English+SC&display=swap" rel="stylesheet">
    <style>
        /* ===== ESTILOS SINNER'S - √ÅNGELES vs DEMONIOS ===== */
        :root {
            --color-primario: #8b0000;
            --color-secundario: #DC143C;
            --color-acento: #ff4500;
            --color-texto: #ad8a1f;
            --color-fondo: #0a0a0a;
            --color-bordes: #DC143C;
            --sombra: 0 4px 15px rgba(255, 0, 0, 0.3);
            --fuente-titulo: 'Nosifer', cursive;
            --fuente-subtitulo: 'Eater', cursive;
            --fuente-productos: 'Eater', cursive;
            --fuente-descripcion: 'MedievalSharp', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--color-fondo);
            color: var(--color-texto);
            font-family: 'Cinzel', serif;
            line-height: 1.6;
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid var(--color-bordes);
            margin-bottom: 30px;
            position: relative;
        }

        header h1 {
            font-family: var(--fuente-titulo);
            font-size: 3.5rem;
            color: var(--color-secundario);
            text-shadow: 3px 3px 0 #000, 0 0 10px var(--color-acento);
            letter-spacing: 2px;
            margin: 0;
        }

        .categorias {
            margin-bottom: 30px;
        }

        .categoria-titulo {
            font-family: var(--fuente-subtitulo);
            font-size: 2rem;
            color: var(--color-acento);
            border-bottom: 1px solid var(--color-bordes);
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .producto-card {
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border: 1px solid var(--color-bordes);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .producto-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--sombra);
        }

        .producto-nombre {
            font-family: var(--fuente-productos);
            font-size: 1.5rem;
            color: var(--color-secundario);
            margin-bottom: 10px;
        }

        .producto-descripcion {
            font-family: var(--fuente-descripcion);
            font-size: 0.9rem;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .producto-precio {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            color: var(--color-acento);
            font-weight: bold;
            margin-top: auto;
        }

        .carrito-icono {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--color-primario);
            color: var(--color-texto);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--sombra);
            border: 1px solid var(--color-bordes);
        }

        .carrito-contador {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--color-acento);
            color: #000;
            font-weight: bold;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        /* Estilos para los modales */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-oculto {
            display: none;
        }

        .modal-contenido {
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border: 2px solid var(--color-bordes);
            border-radius: 10px;
            padding: 25px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--sombra);
        }

        .cerrar-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: var(--color-texto);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-titulo {
            font-family: var(--fuente-subtitulo);
            color: var(--color-secundario);
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 1px solid var(--color-bordes);
            padding-bottom: 10px;
        }

        .topping-checkbox {
            margin-bottom: 10px;
        }

        .topping-checkbox input[type="checkbox"],
        .topping-checkbox input[type="radio"] {
            display: none;
        }

        .topping-checkbox label {
            display: block;
            padding: 10px 15px;
            background-color: #1a1a1a;
            border: 1px solid var(--color-bordes);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .topping-checkbox input[type="checkbox"]:checked + label,
        .topping-checkbox input[type="radio"]:checked + label {
            background-color: var(--color-primario);
            color: var(--color-texto);
        }

        .topping-info {
            display: flex;
            justify-content: space-between;
        }

        .topping-name {
            font-family: var(--fuente-descripcion);
        }

        .topping-price {
            color: var(--color-acento);
            font-weight: bold;
        }

        .botones-modal {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn-modal {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-cancelar {
            background-color: #333;
            color: var(--color-texto);
        }

        .btn-confirmar {
            background-color: var(--color-primario);
            color: var(--color-texto);
        }

        .btn-modal:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }

        .total-carrito {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: right;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid var(--color-bordes);
        }

        .item-carrito {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }

        .item-info {
            flex-grow: 1;
        }

        .item-nombre {
            font-family: var(--fuente-descripcion);
            font-weight: bold;
        }

        .item-detalles {
            font-size: 0.8rem;
            color: #aaa;
        }

        .item-precio {
            color: var(--color-acento);
            font-weight: bold;
        }

        .eliminar-item {
            background: none;
            border: none;
            color: var(--color-secundario);
            cursor: pointer;
            margin-left: 10px;
        }

        .opcion-group {
            margin-bottom: 15px;
        }

        .opcion-group label {
            display: block;
            margin-bottom: 5px;
            font-family: var(--fuente-descripcion);
            font-weight: bold;
        }

        .opcion-group select {
            width: 100%;
            padding: 10px;
            background-color: #1a1a1a;
            color: var(--color-texto);
            border: 1px solid var(--color-bordes);
            border-radius: 5px;
        }

        .ubicacion-horario {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
        }

        .ubicacion-enlace {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .ubicacion-enlace a {
            color: #4e9af1;
            text-decoration: none;
        }

        .ubicacion-enlace a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }
            
            .productos-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-contenido {
                padding: 15px;
            }
            
            .botones-modal {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-modal {
                width: 100%;
            }
        }
    </style>
</head>
<body class="tema-demoniaco">
    <div class="container">
        <header id="cambiador-tema">
            <h1>SINNER'S</h1>
        </header>

        <section class="categorias">
            <h2 class="categoria-titulo">BEBIDAS DEL PECADO</h2>
            <div class="productos-grid" id="bebidas-grid">
                <!-- Productos de bebidas se insertar√°n aqu√≠ con JavaScript -->
            </div>
        </section>

        <section class="categorias">
            <h2 class="categoria-titulo">CAF√âS DEL INFIERNO</h2>
            <div class="productos-grid" id="cafes-grid">
                <!-- Productos de caf√©s se insertar√°n aqu√≠ con JavaScript -->
            </div>
        </section>

        <section class="categorias">
            <h2 class="categoria-titulo">T√âS DE LA REDENCI√ìN</h2>
            <div class="productos-grid" id="tes-grid">
                <!-- Productos de t√©s se insertar√°n aqu√≠ con JavaScript -->
            </div>
        </section>

        <div class="carrito-icono" id="carrito-icono">
            <i class="fas fa-shopping-cart"></i>
            <span class="carrito-contador" id="carrito-contador">0</span>
        </div>
    </div>

    <!-- Modal de opciones de producto -->
    <div class="modal modal-oculto" id="modal-opciones">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-opciones">&times;</button>
            <h2 class="modal-titulo" id="titulo-modal">Personalizar Producto</h2>
            <p><strong>Sabor:</strong> <span id="sabor-destacado"></span></p>
            <div id="formulario-opciones"></div>
            <div class="botones-modal">
                <button class="btn-modal btn-cancelar" id="regresar-modal">CANCELAR</button>
                <button class="btn-modal btn-confirmar" id="confirmar-opciones">CONFIRMAR</button>
            </div>
        </div>
    </div>

    <!-- Modal de carrito -->
    <div class="modal modal-oculto" id="modal-carrito">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-carrito">&times;</button>
            <h2 class="modal-titulo">TU CARRITO DE PECADOS</h2>
            <div id="lista-carrito"></div>
            <p class="total-carrito" id="total-carrito">Total: $0.00 MXN</p>
            <div class="botones-modal">
                <button class="btn-modal btn-cancelar" id="seguir-pidiendo">SEGUIR PIDIENDO</button>
                <button class="btn-modal btn-confirmar" id="whatsapp-btn">FINALIZAR PEDIDO</button>
            </div>
        </div>
    </div>

    <!-- Modal de ubicaci√≥n -->
    <div class="modal modal-oculto" id="modal-ubicacion">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-ubicacion">&times;</button>
            <h2 class="modal-titulo">SELECCIONAR UBICACI√ìN</h2>
            <p>Selecciona tu ubicaci√≥n de entrega:</p>
            <div class="opcion-group">
                <div class="topping-checkbox">
                    <input type="radio" name="ubicacion" value="Calle Coral 120, colonia Estrella, CDMX" id="ubicacion-principal" data-horarios="Lunes a Domingo: 15:00 - 21:00 horas" data-enlace="https://maps.app.goo.gl/" checked>
                    <label for="ubicacion-principal">
                        <div class="topping-info">
                            <span class="topping-name">Calle Coral 120, colonia Estrella, CDMX</span>
                        </div>
                        <div class="ubicacion-horario">Lunes a Domingo: 15:00 - 21:00 horas</div>
                    </label>
                </div>

                <div class="topping-checkbox">
                    <input type="radio" name="ubicacion" value="C. Granate 65, Col. Estrella, Gustavo A. Madero, 07810 Ciudad de M√©xico, CDMX" id="ubicacion-melimarel" data-horarios="Lunes a Viernes: 16:00 - 20:00 horas | S√°bados y Domingos: 15:00 - 20:00 horas" data-enlace="https://maps.app.goo.gl/atimprCAANEjpomd9">
                    <label for="ubicacion-melimarel">
                        <div class="topping-info">
                            <span class="topping-name">PAPELER√çA MELIMAREL</span>
                        </div>
                        <div class="ubicacion-horario">Lunes a Viernes: 16:00 - 20:00 horas | S√°bados y Domingos: 15:00 - 20:00 horas</div>
                        <div class="ubicacion-enlace"><a href="https://maps.app.goo.gl/atimprCAANEjpomd9" target="_blank">Ver en Google Maps</a></div>
                    </label>
                </div>

                <div class="topping-checkbox">
                    <input type="radio" name="ubicacion" value="Esquina Turquesa, Joyas, Col. Estrella, 07810 Ciudad de M√©xico" id="ubicacion-doris" data-horarios="Lunes a Viernes: 16:00 - 20:00 horas | S√°bados: 14:00 - 20:00 horas | Domingos: Cerrado" data-enlace="https://maps.app.goo.gl/VBgoAktyau8u5XZj6">
                    <label for="ubicacion-doris">
                        <div class="topping-info">
                            <span class="topping-name">DISTRIBUIDOR ACCESORIOS MOVILES DORIS</span>
                        </div>
                        <div class="ubicacion-horario">Lunes a Viernes: 16:00 - 20:00 horas | S√°bados: 14:00 - 20:00 horas | Domingos: Cerrado</div>
                        <div class="ubicacion-enlace"><a href="https://maps.app.goo.gl/VBgoAktyau8u5XZj6" target="_blank">Ver en Google Maps</a></div>
                    </label>
                </div>
            </div>
            <div class="botones-modal">
                <button class="btn-modal btn-cancelar" id="cancelar-ubicacion">CANCELAR</button>
                <button class="btn-modal btn-confirmar" id="confirmar-ubicacion">CONFIRMAR UBICACI√ìN</button>
            </div>
        </div>
    </div>

    <!-- Modal de combo -->
    <div class="modal modal-oculto" id="modal-combo">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-combo">&times;</button>
            <h2 class="modal-titulo" id="titulo-combo">Personalizar Combo</h2>
            <div id="opciones-combo"></div>
            <div class="botones-modal">
                <button class="btn-modal btn-cancelar" id="regresar-combo">CANCELAR</button>
                <button class="btn-modal btn-confirmar" id="confirmar-combo">CONFIRMAR COMBO</button>
            </div>
        </div>
    </div>

    <!-- Modal de pago -->
    <div class="modal modal-oculto" id="modal-pago">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-pago">&times;</button>
            <h2 class="modal-titulo">INSTRUCCIONES DE PAGO</h2>
            <p>Para completar tu pedido, realiza una transferencia a:</p>
            <p><strong>Banco:</strong> BBVA</p>
            <p><strong>Titular:</strong> Eric Daniel Guti√©rrez Arana</p>
            <p><strong>CLABE:</strong> 012 261 01584933343 3</p>
            <p><strong>PAGO:</strong> En el CONCEPTO de la transferencia COLOCA TU NOMBRE o el NOMBRE DE LA PERSONA que realizar√° la recolecci√≥n</p>
            <p>Una vez realizado el pago, haz clic en el bot√≥n de abajo para enviar tu pedido por WhatsApp con el comprobante.</p>
            <p id="direccion-confirmacion">üìç </p>
            <div class="botones-modal">
                <button class="btn-modal btn-cancelar" id="regresar-direccion">CAMBIAR DIRECCI√ìN</button>
                <button class="btn-modal btn-confirmar" id="confirmar-pedido">ENVIAR POR WHATSAPP</button>
            </div>
        </div>
    </div>

    <!-- Modal de verificaci√≥n de edad -->
    <div class="modal modal-oculto" id="modal-verificacion-edad">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-verificacion-edad">&times;</button>
            <h2 class="modal-titulo">VERIFICACI√ìN DE EDAD</h2>
            <div style="text-align: center; font-size: 1.5rem; margin: 20px 0; color: #ff2a2a;">
                <p>üîû SE SOLICITAR√Å INE PARA BEBIDAS ALCOH√ìLICAS</p>
            </div>
            <div class="botones-modal" style="justify-content: center;">
                <button class="btn-modal btn-confirmar" id="aceptar-verificacion">ACEPTAR</button>
            </div>
        </div>
    </div>

    <!-- Modal de pedido m√≠nimo -->
    <div class="modal modal-oculto" id="modal-pedido-minimo">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-pedido-minimo">&times;</button>
            <h2 class="modal-titulo">PEDIDO M√çNIMO</h2>
            <div style="text-align: center; font-size: 1.2rem; margin: 20px 0;">
                <p>No se pueden realizar pedidos con menos de 3 productos.</p>
                <p>Agrega m√°s items para continuar.</p>
            </div>
            <div class="botones-modal" style="justify-content: center;">
                <button class="btn-modal btn-confirmar" id="aceptar-pedido-minimo">ACEPTAR</button>
            </div>
        </div>
    </div>

    <!-- Modal de horario fuera de servicio -->
    <div class="modal modal-oculto" id="modal-horario-fuera">
        <div class="modal-contenido">
            <button class="cerrar-modal" id="cerrar-horario-fuera">&times;</button>
            <h2 class="modal-titulo">HORARIO NO DISPONIBLE</h2>
            <div style="text-align: center; font-size: 1.2rem; margin: 20px 0; color: #ff2a2a;">
                <p>üö´ LO SENTIMOS</p>
                <p>UBICACI√ìN SELECCIONADA FUERA DE HORARIO</p>
            </div>
            <p style="text-align: center; margin-bottom: 20px;">
                La ubicaci√≥n seleccionada no se encuentra disponible en este momento.
            </p>
            <div class="botones-modal" style="justify-content: center;">
                <button class="btn-modal btn-confirmar" id="aceptar-horario-fuera">ENTENDIDO</button>
            </div>
        </div>
    </div>

    <script>
        // Datos de productos con toppings corregidos
        const productos = {
            bebidas: [
                { 
                    id: 1, 
                    nombre: "LEVIAT√ÅN", 
                    descripcion: "Sum√©rgete en las profundidades de la tentaci√≥n azul oscura. Sabor a mora azul que te arrastrar√° al abismo. (475ml)",
                    sabor: "Mora azul", 
                    precio: 50, 
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 },
                        { nombre: "Elixir Prohibido (Vodka 2.5 oz)", precio: 15 }
                    ]
                },
                { 
                    id: 2, 
                    nombre: "INFIERNO", 
                    descripcion: "Pasi√≥n ardiente con sabor a frutos rojos. (475ml)",
                    sabor: "Frutos rojos", 
                    precio: 50, 
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 },
                        { nombre: "Elixir Prohibido (Ron Blanco 2.5 oz)", precio: 15 }
                    ]
                },
                { 
                    id: 3, 
                    nombre: "JALURIA", 
                    descripcion: "Entre m√°s lo resistes m√°s deseas probar su sabor a manzana verde. (475ml)",
                    sabor: "Manzana verde", 
                    precio: 50, 
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 },
                        { nombre: "Elixir Prohibido (Ron Blanco 2.5 oz)", precio: 15 }
                    ]
                },
                { 
                    id: 4, 
                    nombre: "ASMODEO", 
                    descripcion: "Te har√° sentir la lujuria en un sorbo por su sabor a frutos del bosque. (475ml)",
                    sabor: "Frutos del bosque", 
                    precio: 50, 
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 },
                        { nombre: "Elixir Prohibido (Vodka 1.5 oz/Ron Blanco 1 oz)", precio: 15 }
                    ]
                }
            ],
            cafes: [
                { 
                    id: 5, 
                    nombre: "IRA DIVINA", 
                    descripcion: "Energ√≠a Divina toma un Caf√© Cold Brew. (475ml)",
                    sabor: "Caf√©", 
                    precio: 40, 
                    opciones: {
                        "LECHE": ["Normal (+$10)", "Deslactosada (+$10)", "Sin leche"],
                        "ENDULZANTE": ["Az√∫car", "Sustituto", "Sin endulzante"]
                    },
                    toppings: [
                        { nombre: "Gemas del Infierno (Coffee Jelly)", precio: 15 }
                    ]
                },
                { 
                    id: 6, 
                    nombre: "PACTUM", 
                    descripcion: "Pacto divino, tranquil@ solo es un suave Cold Brew descafeinado. (475ml)",
                    sabor: "Caf√© descafeinado", 
                    precio: 40, 
                    opciones: {
                        "LECHE": ["Normal (+$10)", "Deslactosada (+$10)", "Sin leche"],
                        "ENDULZANTE": ["Az√∫car", "Sustituto", "Sin endulzante"]
                    },
                    toppings: [
                        { nombre: "Gemas del Infierno (Coffee Jelly)", precio: 15 }
                    ]
                }
            ],
            tes: [
                { 
                    id: 7, 
                    nombre: "REDENCI√ìN", 
                    descripcion: "Todos la buscamos, y todos la necesitamos. Cold Brew Tea. (475ml)",
                    sabor: "T√© negro, T√© verde, T√© de frutos del bosque, T√© de Jamaica (pregunta por la disponibilidad de tu selecci√≥n)", 
                    precio: 35, 
                    opciones: {
                        "ENDULZANTE": ["Az√∫car", "Sustituto", "Sin endulzante"]
                    },
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 }
                    ]
                },
                { 
                    id: 8, 
                    nombre: "REVELACI√ìN", 
                    descripcion: "El misterio se devela hoy. ¬øSer√° tu salvaci√≥n o tu perdici√≥n? Atr√©vete a conocer el veredicto. Bebida refrescante del d√≠a. (475ml)",
                    sabor: "Bebida sorpresa del d√≠a", 
                    precio: 35, 
                    opciones: {
                        "ENDULZANTE": ["Az√∫car", "Sustituto", "Sin endulzante"]
                    },
                    toppings: [
                        { nombre: "L√°grimas de Demonio (Bubble Jelly)", precio: 15 }
                    ]
                }
            ]
        };

        // Variables globales
        let carrito = [];
        let productoSeleccionado = null;
        let ubicacionSeleccionada = "Calle Coral 120, colonia Estrella, CDMX";
        let necesitaVerificacionEdad = false;

        // Inicializar la aplicaci√≥n cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            inicializarApp();
        });

        // Funci√≥n para inicializar la aplicaci√≥n
        function inicializarApp() {
            mostrarProductos();
            setupEventListeners();
        }

        // Funci√≥n para mostrar los productos en la p√°gina
        function mostrarProductos() {
            // Mostrar bebidas
            const bebidasGrid = document.getElementById('bebidas-grid');
            productos.bebidas.forEach(producto => {
                bebidasGrid.appendChild(crearCardProducto(producto));
            });
            
            // Mostrar caf√©s
            const cafesGrid = document.getElementById('cafes-grid');
            productos.cafes.forEach(producto => {
                cafesGrid.appendChild(crearCardProducto(producto));
            });
            
            // Mostrar t√©s
            const tesGrid = document.getElementById('tes-grid');
            productos.tes.forEach(producto => {
                tesGrid.appendChild(crearCardProducto(producto));
            });
        }

        // Funci√≥n para crear una tarjeta de producto
        function crearCardProducto(producto) {
            const card = document.createElement('div');
            card.className = 'producto-card';
            card.innerHTML = `
                <h3 class="producto-nombre">${producto.nombre}</h3>
                <p class="producto-descripcion">${producto.descripcion}</p>
                <p class="producto-precio">$${producto.precio}.00 MXN</p>
            `;
            
            card.addEventListener('click', () => {
                productoSeleccionado = producto;
                mostrarModalOpciones(producto);
            });
            
            return card;
        }

        // Funci√≥n para mostrar el modal de opciones de producto
        function mostrarModalOpciones(producto) {
            const modal = document.getElementById('modal-opciones');
            const tituloModal = document.getElementById('titulo-modal');
            const saborDestacado = document.getElementById('sabor-destacado');
            const formularioOpciones = document.getElementById('formulario-opciones');
            
            tituloModal.textContent = producto.nombre;
            saborDestacado.textContent = producto.sabor;
            formularioOpciones.innerHTML = '';
            
            // Agregar opciones si el producto las tiene
            if (producto.opciones) {
                for (const [categoria, opciones] of Object.entries(producto.opciones)) {
                    const opcionGroup = document.createElement('div');
                    opcionGroup.className = 'opcion-group';
                    
                    const label = document.createElement('label');
                    label.textContent = categoria;
                    opcionGroup.appendChild(label);
                    
                    const select = document.createElement('select');
                    select.name = categoria.toLowerCase();
                    
                    opciones.forEach(opcion => {
                        const option = document.createElement('option');
                        option.value = opcion;
                        option.textContent = opcion;
                        select.appendChild(option);
                    });
                    
                    opcionGroup.appendChild(select);
                    formularioOpciones.appendChild(opcionGroup);
                }
            }
            
            // Agregar toppings si el producto los tiene
            if (producto.toppings && producto.toppings.length > 0) {
                const toppingsTitle = document.createElement('h3');
                toppingsTitle.textContent = 'Toppings Adicionales:';
                toppingsTitle.style.marginTop = '20px';
                toppingsTitle.style.marginBottom = '10px';
                formularioOpciones.appendChild(toppingsTitle);
                
                producto.toppings.forEach(topping => {
                    const toppingDiv = document.createElement('div');
                    toppingDiv.className = 'topping-checkbox';
                    
                    toppingDiv.innerHTML = `
                        <input type="checkbox" id="topping-${topping.nombre.replace(/\s+/g, '-')}" name="toppings" value="${topping.nombre}" data-precio="${topping.precio}">
                        <label for="topping-${topping.nombre.replace(/\s+/g, '-')}">
                            <div class="topping-info">
                                <span class="topping-name">${topping.nombre}</span>
                                <span class="topping-price">+$${topping.precio}.00</span>
                            </div>
                        </label>
                    `;
                    
                    formularioOpciones.appendChild(toppingDiv);
                });
            }
            
            modal.classList.remove('modal-oculto');
        }

        // Configurar event listeners para los modales y botones
        function setupEventListeners() {
            // Modal de opciones de producto
            document.getElementById('cerrar-opciones').addEventListener('click', () => {
                document.getElementById('modal-opciones').classList.add('modal-oculto');
            });
            
            document.getElementById('regresar-modal').addEventListener('click', () => {
                document.getElementById('modal-opciones').classList.add('modal-oculto');
            });
            
            document.getElementById('confirmar-opciones').addEventListener('click', agregarAlCarrito);
            
            // Modal de carrito
            document.getElementById('carrito-icono').addEventListener('click', mostrarCarrito);
            
            document.getElementById('cerrar-carrito').addEventListener('click', () => {
                document.getElementById('modal-carrito').classList.add('modal-oculto');
            });
            
            document.getElementById('seguir-pidiendo').addEventListener('click', () => {
                document.getElementById('modal-carrito').classList.add('modal-oculto');
            });
            
            document.getElementById('whatsapp-btn').addEventListener('click', mostrarModalUbicacion);
            
            // Modal de ubicaci√≥n
            document.getElementById('cerrar-ubicacion').addEventListener('click', () => {
                document.getElementById('modal-ubicacion').classList.add('modal-oculto');
            });
            
            document.getElementById('cancelar-ubicacion').addEventListener('click', () => {
                document.getElementById('modal-ubicacion').classList.add('modal-oculto');
            });
            
            document.getElementById('confirmar-ubicacion').addEventListener('click', confirmarUbicacion);
            
            // Modal de pago
            document.getElementById('cerrar-pago').addEventListener('click', () => {
                document.getElementById('modal-pago').classList.add('modal-oculto');
            });
            
            document.getElementById('regresar-direccion').addEventListener('click', () => {
                document.getElementById('modal-pago').classList.add('modal-oculto');
                mostrarModalUbicacion();
            });
            
            document.getElementById('confirmar-pedido').addEventListener('click', enviarWhatsApp);
            
            // Modal de pedido m√≠nimo
            document.getElementById('aceptar-pedido-minimo').addEventListener('click', () => {
                document.getElementById('modal-pedido-minimo').classList.add('modal-oculto');
            });
            
            // Modal de horario fuera de servicio
            document.getElementById('aceptar-horario-fuera').addEventListener('click', () => {
                document.getElementById('modal-horario-fuera').classList.add('modal-oculto');
            });
            
            // Modal de verificaci√≥n de edad
            document.getElementById('aceptar-verificacion').addEventListener('click', () => {
                document.getElementById('modal-verificacion-edad').classList.add('modal-oculto');
            });
        }

        // Funci√≥n para verificar si se seleccion√≥ alg√∫n Elixir Prohibido (bebida alcoh√≥lica)
        function contieneElixirProhibido(toppings) {
            return toppings.some(topping => topping.nombre.includes('Elixir Prohibido'));
        }

        // Funci√≥n para agregar producto al carrito
        function agregarAlCarrito() {
            if (!productoSeleccionado) return;
            
            const opcionesSeleccionadas = {};
            const toppingsSeleccionados = [];
            let precioTotal = productoSeleccionado.precio;
            
            // Obtener opciones seleccionadas
            if (productoSeleccionado.opciones) {
                for (const [categoria] of Object.entries(productoSeleccionado.opciones)) {
                    const select = document.querySelector(`select[name="${categoria.toLowerCase()}"]`);
                    opcionesSeleccionadas[categoria] = select.value;
                    
                    // Verificar si hay costo adicional por leche
                    if (categoria === 'LECHE' && select.value.includes('+$10')) {
                        precioTotal += 10;
                    }
                }
            }
            
            // Obtener toppings seleccionados
            const toppingCheckboxes = document.querySelectorAll('input[name="toppings"]:checked');
            toppingCheckboxes.forEach(checkbox => {
                const toppingNombre = checkbox.value;
                const toppingPrecio = parseInt(checkbox.dataset.precio);
                toppingsSeleccionados.push({
                    nombre: toppingNombre,
                    precio: toppingPrecio
                });
                precioTotal += toppingPrecio;
            });
            
            // Verificar si contiene Elixir Prohibido (bebida alcoh√≥lica)
            if (contieneElixirProhibido(toppingsSeleccionados)) {
                necesitaVerificacionEdad = true;
            }
            
            // Agregar producto al carrito
            carrito.push({
                id: productoSeleccionado.id,
                nombre: productoSeleccionado.nombre,
                sabor: productoSeleccionado.sabor,
                opciones: opcionesSeleccionadas,
                toppings: toppingsSeleccionados,
                precio: precioTotal
            });
            
            // Actualizar contador del carrito
            actualizarContadorCarrito();
            
            // Cerrar modal
            document.getElementById('modal-opciones').classList.add('modal-oculto');
            
            // Mostrar mensaje de confirmaci√≥n
            alert(`${productoSeleccionado.nombre} agregado al carrito!`);
        }

        // Funci√≥n para actualizar el contador del carrito
        function actualizarContadorCarrito() {
            const contador = document.getElementById('carrito-contador');
            contador.textContent = carrito.length;
        }

        // Funci√≥n para mostrar el carrito
        function mostrarCarrito() {
            const listaCarrito = document.getElementById('lista-carrito');
            const totalCarrito = document.getElementById('total-carrito');
            
            listaCarrito.innerHTML = '';
            
            if (carrito.length === 0) {
                listaCarrito.innerHTML = '<p>Tu carrito est√° vac√≠o</p>';
                totalCarrito.textContent = 'Total: $0.00 MXN';
            } else {
                let total = 0;
                
                carrito.forEach((item, index) => {
                    total += item.precio;
                    
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'item-carrito';
                    
                    let detalles = '';
                    if (Object.keys(item.opciones).length > 0) {
                        detalles += 'Opciones: ' + Object.values(item.opciones).join(', ') + '<br>';
                    }
                    if (item.toppings.length > 0) {
                        detalles += 'Toppings: ' + item.toppings.map(t => t.nombre).join(', ');
                    }
                    
                    itemDiv.innerHTML = `
                        <div class="item-info">
                            <div class="item-nombre">${item.nombre}</div>
                            <div class="item-detalles">${detalles}</div>
                        </div>
                        <div class="item-precio">$${item.precio}.00</div>
                        <button class="eliminar-item" data-index="${index}"><i class="fas fa-trash"></i></button>
                    `;
                    
                    listaCarrito.appendChild(itemDiv);
                });
                
                // Agregar event listeners a los botones de eliminar
                document.querySelectorAll('.eliminar-item').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        carrito.splice(index, 1);
                        actualizarContadorCarrito();
                        mostrarCarrito();
                    });
                });
                
                totalCarrito.textContent = `Total: $${total}.00 MXN`;
            }
            
            document.getElementById('modal-carrito').classList.remove('modal-oculto');
        }

        // Funci√≥n para mostrar el modal de ubicaci√≥n
        function mostrarModalUbicacion() {
            // Verificar pedido m√≠nimo
            if (carrito.length < 3) {
                document.getElementById('modal-carrito').classList.add('modal-oculto');
                document.getElementById('modal-pedido-minimo').classList.remove('modal-oculto');
                return;
            }
            
            // Verificar si necesita verificaci√≥n de edad (bebidas alcoh√≥licas)
            if (necesitaVerificacionEdad) {
                document.getElementById('modal-carrito').classList.add('modal-oculto');
                document.getElementById('modal-verificacion-edad').classList.remove('modal-oculto');
                return;
            }
            
            document.getElementById('modal-carrito').classList.add('modal-oculto');
            document.getElementById('modal-ubicacion').classList.remove('modal-oculto');
        }

        // Funci√≥n para verificar si una ubicaci√≥n est√° disponible seg√∫n su horario
        function verificarDisponibilidadUbicacion(horarios) {
            const ahora = new Date();
            const diaSemana = ahora.getDay(); // 0: Domingo, 1: Lunes, ..., 6: S√°bado
            const horaActual = ahora.getHours();
            const minutosActual = ahora.getMinutes();
            const horaDecimal = horaActual + (minutosActual / 60);
            
            // Parsear los horarios
            if (horarios.includes("Domingos: Cerrado") && diaSemana === 0) {
                return false;
            }
            
            if (horarios.includes("Lunes a Viernes")) {
                const match = horarios.match(/Lunes a Viernes: (\d{2}):(\d{2}) - (\d{2}):(\d{2})/);
                if (match && diaSemana >= 1 && diaSemana <= 5) {
                    const horaInicio = parseInt(match[1]) + (parseInt(match[2]) / 60);
                    const horaFin = parseInt(match[3]) + (parseInt(match[4]) / 60);
                    if (horaDecimal >= horaInicio && horaDecimal <= horaFin) {
                        return true;
                    }
                }
            }
            
            if (horarios.includes("S√°bados")) {
                const match = horarios.match(/S√°bados: (\d{2}):(\d{2}) - (\d{2}):(\d{2})/);
                if (match && diaSemana === 6) {
                    const horaInicio = parseInt(match[1]) + (parseInt(match[2]) / 60);
                    const horaFin = parseInt(match[3]) + (parseInt(match[4]) / 60);
                    if (horaDecimal >= horaInicio && horaDecimal <= horaFin) {
                        return true;
                    }
                }
            }
            
            if (horarios.includes("Domingos")) {
                const match = horarios.match(/Domingos: (\d{2}):(\d{2}) - (\d{2}):(\d{2})/);
                if (match && diaSemana === 0) {
                    const horaInicio = parseInt(match[1]) + (parseInt(match[2]) / 60);
                    const horaFin = parseInt(match[3]) + (parseInt(match[4]) / 60);
                    if (horaDecimal >= horaInicio && horaDecimal <= horaFin) {
                        return true;
                    }
                }
            }
            
            if (horarios.includes("Lunes a Domingo")) {
                const match = horarios.match(/Lunes a Domingo: (\d{2}):(\d{2}) - (\d{2}):(\d{2})/);
                if (match) {
                    const horaInicio = parseInt(match[1]) + (parseInt(match[2]) / 60);
                    const horaFin = parseInt(match[3]) + (parseInt(match[4]) / 60);
                    if (horaDecimal >= horaInicio && horaDecimal <= horaFin) {
                        return true;
                    }
                }
            }
            
            return false;
        }

        // Funci√≥n para confirmar la ubicaci√≥n seleccionada
        function confirmarUbicacion() {
            const ubicacionRadio = document.querySelector('input[name="ubicacion"]:checked');
            ubicacionSeleccionada = ubicacionRadio.value;
            const horarios = ubicacionRadio.dataset.horarios;
            
            // Verificar si la ubicaci√≥n est√° disponible seg√∫n el horario
            if (!verificarDisponibilidadUbicacion(horarios)) {
                document.getElementById('modal-ubicacion').classList.add('modal-oculto');
                document.getElementById('modal-horario-fuera').classList.remove('modal-oculto');
                return;
            }
            
            document.getElementById('modal-ubicacion').classList.add('modal-oculto');
            mostrarModalPago();
        }

        // Funci√≥n para mostrar el modal de pago
        function mostrarModalPago() {
            const direccionConfirmacion = document.getElementById('direccion-confirmacion');
            direccionConfirmacion.textContent = `üìç ${ubicacionSeleccionada}`;
            
            document.getElementById('modal-pago').classList.remove('modal-oculto');
        }

        // Funci√≥n para enviar el pedido por WhatsApp
        function enviarWhatsApp() {
            let mensaje = "¬°Hola! Quiero hacer un pedido:%0A%0A";
            
            carrito.forEach(item => {
                mensaje += `‚Ä¢ ${item.nombre} - $${item.precio}.00%0A`;
                
                if (Object.keys(item.opciones).length > 0) {
                    mensaje += `  Opciones: ${Object.values(item.opciones).join(', ')}%0A`;
                }
                
                if (item.toppings.length > 0) {
                    mensaje += `  Toppings: ${item.toppings.map(t => t.nombre).join(', ')}%0A`;
                }
                
                mensaje += "%0A";
            });
            
            let total = carrito.reduce((sum, item) => sum + item.precio, 0);
            mensaje += `%0ATotal: $${total}.00 MXN%0A`;
            mensaje += `%0AUbicaci√≥n: ${ubicacionSeleccionada}%0A`;
            
            // Agregar nota sobre verificaci√≥n de edad si es necesario
            if (necesitaVerificacionEdad) {
                mensaje += "%0Aüîû NOTA: Este pedido contiene bebidas alcoh√≥licas, se solicitar√° INE para su entrega";
            }
            
            mensaje += "%0A¬°Gracias!";
            
            const telefono = "5215611649344"; // N√∫mero de WhatsApp actualizado
            const url = `https://wa.me/${telefono}?text=${mensaje}`;
            
            window.open(url, '_blank');
            
            // Limpiar carrito despu√©s de enviar
            carrito = [];
            necesitaVerificacionEdad = false;
            actualizarContadorCarrito();
            document.getElementById('modal-pago').classList.add('modal-oculto');
        }
    </script>
</body>
</html>
